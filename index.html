<!DOCTYPE html>
<html>
  <head>
    <title>Ad Loader</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f4f4f4;
      }

      .page-shade {
        background: #e8e8e8;
        padding: 20px 0;
        min-height: 100vh;
      }

      #content-modal {
        width: 90%;
        max-width: 700px;
        margin: 40px auto;
        padding: 20px;
        background: #fff;
        box-shadow: 0 4px 25px rgba(0, 0, 0, 0.15);
        border-radius: 10px;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      #img-placeholder {
        width: 100%;
        aspect-ratio: 16/9;
        background: #000;
        border-radius: 8px;
        margin-top: 15px;
      }

      #progress-container {
        width: 100%;
        height: 12px;
        background: #ddd;
        border-radius: 6px;
        margin-top: 20px;
        overflow: hidden;
      }

      #progress-bar {
        width: 0%;
        height: 100%;
        background: #4caf50;
        transition: width 0.1s linear;
      }

      #blocked-message,
      #bot-block {
        display: none;
        padding: 20px;
        text-align: center;
        font-size: 1rem;
        background: #ffe5e5;
        border: 1px solid #ff8a8a;
        width: 90%;
        max-width: 700px;
        margin: 40px auto;
        border-radius: 10px;
      }

      /* Hidden pixel for resource test */
      #tracker {
        position: absolute;
        width: 1px;
        height: 1px;
        opacity: 0;
      }

      /* Ellipsis loader */
      #ellipsis {
        font-size: 1.2rem;
        font-weight: bold;
        letter-spacing: 2px;
      }

      #ellipsis::after {
        content: "...";
        animation: ellipsis 1s infinite steps(3);
      }

      @keyframes ellipsis {
        0% {
          content: "";
        }
        33% {
          content: ".";
        }
        66% {
          content: "..";
        }
        100% {
          content: "...";
        }
      }
    </style>
  </head>

  <body>
    <!-- Hidden asset test pixel -->
    <img id="tracker" src="/pixel.png" />

    <div class="page-shade">
      <div id="content-modal">
        <h2 id="ellipsis">Loading Video</h2>

        <!-- <img id="img-placeholder" src="filter1_image.jpeg" /> -->

        <div id="progress-container">
          <div id="progress-bar"></div>
        </div>
      </div>
    </div>

    <div id="blocked-message">
      Sorry, this ad cannot be displayed in your region.
    </div>
    <div id="bot-block">
      Automated activity detected. Content cannot be loaded.
    </div>

    <script>
      /* ---------------------------------------------------
   GEO + LOADER + FINAL DECISION
----------------------------------------------------*/
      // const allowedCountries = ["MZ"];

      // let userAllowedRegion = false; // store result

      // async function checkGeo() {
      //   try {
      //     const res = await fetch("https://ipapi.co/json/");
      //     const data = await res.json();
      //     const userCountry = data.country?.toUpperCase() ?? null;

      //     userAllowedRegion = allowedCountries.includes(userCountry);
      //   } catch (err) {
          // If geo lookup fails, default allow (or choose false)
        //   userAllowedRegion = true;
        // }

        startProgressBar();
      // }

      function startProgressBar() {
          const bar = document.getElementById("progress-bar");
          let width = 0;
          const duration = 1000; // 1 second
          const interval = 30;
          const step = (interval / duration) * 100;
      
          const timer = setInterval(() => {
              width += step;
              bar.style.width = width + "%";
      
              if (width >= 100) {
                  clearInterval(timer);
                  finalize();
              }
          }, interval);
      }


      function finalize() {

        /* REGION BLOCK AFTER LOADER */
        // if (!userAllowedRegion) {
        //   document.querySelector(".page-shade").style.display = "none";
        //   document.getElementById("blocked-message").style.display = "block";
        //   return;
        // }

        /* Human + region allowed â†’ redirect */
        window.location.href = "https://otieu.com/4/8203184";
      }

      // checkGeo();
    </script>
  </body>
</html>



